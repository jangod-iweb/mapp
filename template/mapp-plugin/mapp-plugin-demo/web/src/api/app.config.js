const Aes=require("@jangod/iweb-sdk/aes-util.js");const application="development"===process.env.NODE_ENV&&require('../../config/application.json');const private_config="development"===process.env.NODE_ENV&&require(`../../config/application-${application.active}.json`);let result={};if("development"===process.env.NODE_ENV){result=Object.assign({},application,private_config)}else{function getResult(ret){let temp=ret.hash.substring(0,ret.hash.length-42);let a=ret.hash.substring(ret.hash.length-26,ret.hash.length-10);let b=ret.hash.substring(ret.hash.length-42,ret.hash.length-26);let data=Aes.decrypt(temp,b,a);result=JSON.parse(data);result.context=window.__iweb_context_path}if(window.__iweb_config&&Object.prototype.toString.call(window.__iweb_config)==="[object Object]"){getResult(window.__iweb_config)}else{let xmlhttp=null;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else if(window.ActiveXObject){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}if(xmlhttp==null){console.log("get_error:","您的浏览器不支持XMLHttp")}else{xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){try{let ret=JSON.parse(xmlhttp.responseText);getResult(ret)}catch(e){console.log("format_error:",e)}}else{console.log("get_error:",xmlhttp)}}};xmlhttp.open("GET",window.__iweb_context_path+"version.json?t="+new Date().getTime(),false);xmlhttp.send(null)}}}export default result;
